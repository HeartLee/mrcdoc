# 牧易API

### 1.coding上项目名: muyi-php，上面有两个分支

+ master分支是之前没有删减财务，关注列表，没有更改权限验证的代码

- muyi-new分支是删减了功能，改变登录方式之后的代码 

### 2.代码使用PHP CI框架 + SQLSERVER编写

> 数据库由甲方提供，我们只涉及数据的读取，分类，这些操作都在视图上进行（数据视图比较混乱），甲方数据库对接人是孙阿星

> 数据库连接信息
```apple js
  主机名或IP地址：114.112.100.156
  用户名： demo
  密码： demo123
```
> 涉及到的数据库（这两个数据库结构相同）
+ h16
+ demo 

> 数据库配置

```angular2html
  $db['default'] = array(
  	'dsn'	=> '',
  	'hostname' => '114.112.100.156',
  	'username' => 'demo',
  	'password' => 'demo123',
  	'database' => 'appuser',
  	'dbdriver' => 'sqlsrv',
  	'dbprefix' => '',
  	'pconnect' => FALSE,
  	// 'db_debug' => (ENVIRONMENT !== 'production'),
  	'db_debug'=>TRUE,
  	'cache_on' => FALSE,
  	'cachedir' => '',
  	'char_set' => 'utf8',
  	// 'dbcollat' => 'utf8_general_ci',//只适用mysql mysqli数据库驱动
  	'swap_pre' => '',
  	'encrypt' => FALSE,
  	'compress' => FALSE,
  	'stricton' => FALSE,
  	'failover' => array(),
  	'save_queries' => TRUE
  );
```

### 3.代码结构

+ 控制器

```angular2html
  + controllers 控制器
    - Base.php
    - Finance.php
    - Site.php
    - Stock.php
    - User.php
  + models 模型
    - Finances.php
    - Sites.php
    - Stocks.php
    - tokens.php
    - Users.php 
```

> 备注：Finance控制器，Finances模型在实际项目中已经不需要了，这块是财务方面的，如果以后还需要，可以在此基础上修改或扩展

### 4.libraries下的Util.php 用于APP中用户权限验证

```angular2html
    public static function authors($view,$userId){
            $rightsList =self::getUserRight($userId);
            return $view ?in_array($view,$rightsList) :false;
        }
        private static function getUserRight($userId){
            $where=['UserId'=>$userId,'查阅权限'=>'1'];
            $db =& get_instance();
            $rights=$db->db->select('项目 as viewName')->where($where)->from(self::author)->get()->result_array();
            $rights = array_column($rights, 'viewName');
            return array_unique($rights);
        }
```
### APP登录方式说明

+ 打开软件，先输入应用系统名，才允许登录

+ 应用系统名实际就是数据库名（h16/demo）,因为是根据数据库区分用户的....

### 5.牧易App开发群： 489208251



# 中国矿业联盟

### 1.coding上项目名: cumsi，上面有两个分支

+ master分支是只有前端静态页面

+ Ci分支是加上了后台管理，是这个网站的全部（前端页面+后台）

### 2.代码使用php CI框架 + mysql 编写

> 数据库配置

```angular2html
  $db['default'] = array(
  	'dsn'	=> '',
  	'hostname' => 'wiki100.net:3306',//本地运行环境
  //	'hostname' => 'smcdb.c0to3pxvacb4.us-west-2.rds.amazonaws.com', //矿业联盟线上主机
  	'username' => 'root',
  //	'password' => 'smc201415', //矿业联盟线上密码
  	'password' => 'root',//本地密码
  	'database' => 'cumsi',
  	'dbdriver' => 'mysqli',
  	'dbprefix' => '',
  	'pconnect' => FALSE,
  	'db_debug' => (ENVIRONMENT !== 'production'),
  	'cache_on' => FALSE,
  	'cachedir' => '',
  	'char_set' => 'utf8',
  	'dbcollat' => 'utf8_general_ci',
  	'swap_pre' => '',
  	'encrypt' => FALSE,
  	'compress' => FALSE,
  	'stricton' => FALSE,
  	'failover' => array(),
  	'save_queries' => TRUE
  );
```
> 如果以后需要修改，运行在本地环境，请这样修改数据库配置文件

### 3.代码结构

+ 控制器
```angular2html
+controllers 控制器文件夹
  + console 后台控制器
    - Admin.php 
    - News.php
    - User.php
  + Home.php 前台控制器
```
+ 模型

```angular2html
  + models 模型文件夹
    - Cats.php
    - NewsModel.php
    - Users.php
```
+ 视图

```angular2html
  + views 视图文件夹
    + console 后台页面
      - add_banner.php
      - add_link.php
      - admin_modify.php
      - adminList.php
      - banner.php
      - banner-left.php
      - base_info.php
      - footer.php
      - header.php
      - index.php
      - inner-header.php
      - links.php
      - login.php
      - news.php
      - nwes_edit.php
      - sign-in.php
    + home 前台页面
      - about.php
      - driver.php
      - dynamic.php
      - footer.php
      - header.php
      - index.php
      - leftcon.php
      - manaUnit.php
      - new_detail.php
      - notice.php
      - organization.php
      - pagination.php
      - technology.php
      - unionFile.php
```
### 4.功能说明

+ 后台管理系统中，友情链接可以使用，当时没有在前台页面展示，后期如果需要，就把前台固定的友情链接换成由数据库查询出来的数据即可

# 航天鲲鹏

### 1.coding上项目名：aero，只有一个分支

### 2.代码使用php CI框架 + mysql 编写

### 3.代码结构

```angular2html
    + application
      + controllers 控制器文件夹
        + console   网站后台控制器文件夹
          - .....  网站后台控制器
        - Home.php 网站前台控制器
      + models   模型文件夹
        - .....
    + db
      - aero.sql 数据库文件
```

### 4.遗留的问题

+ 网站前台页面是我写的，后端代码改自  `北京市科学器材管理后台` 

+ 后端代码还有部分功能上的bug，在查询 `内容列表` `产品列表` 时，按ID的升序和降序排列时还有问题

+ `上传图片和文件` 时，如果上传类型不允许，出现错误提示后，无法再次上传。

> 备注：该部分后台代码，时间稍久远，有点混乱

# Health Survey 健康问卷

### 1.coding上项目名：survey，只用master分支

### 2.代码使用php CI框架 + mysql 编写

+ 前端代码是我写的，后端代码在聪厚写的基础上一定程度的增改

+ 该网站可以切换多语言，但是仅限制在登录界面里切换，根据登录时选的语言，存入cookie，然后调用视图里相应的语言包视图

+ 配合公司的ios端产品 Health Survey 使用

### 3.代码结构

```angular2html
  + application
        + controllers 控制器文件夹
          - Base.php
          - Home.php
          - Question.php
          - User.php
        + models   模型文件夹
          - ....
        + views 视图文件夹，里面包含三种语言
          + en 英语
          + sp 西班牙语（没翻译，还是英语）
          + zh 中文
          
        
  - survey.sql 数据库文件
```


# 韦尔科技官网

### 1.coding上项目名：ourwill，只用master分支

### 2.代码使用PHP CI框架 + mysql 编写

+ 前台代码由我重新编写，后台管理系统在公司原有的管理系统上稍作改动

### 3.代码结构

```angular2html
  + application
        + controllers 控制器文件夹
          - Base.php
          - Home.php
          - Question.php
          - User.php
        + models   模型文件夹
          - ....
```

# 恒海建金官网

### 1.coding上项目名：henghai，只用master分支

### 2.代码使用PHP CI框架 + mysql + vue（只要用在后台管理） 编写

+ 恒海建金的前台代码和公司官网的以及航天鲲鹏的相似，恒海是初创，写完后，经理觉得设计的好看，然后公司官网也改成这种设计

### 3.代码结构

```angular2html
  + application
        + controllers 控制器文件夹
          - Base.php
          - Home.php
          - Question.php
          - User.php
        + models   模型文件夹
          - ....
        + views   视图文件夹
          + console 后台视图
            - index.php 后台管理页面，由vue写的，那时刚接触vue不久
            - login.php
          + home  前台视图
            .....
```

# 孚昱资本官网

### 1.coding上项目名：fuyuadmin，只有master分支

### 2.代码使用PHP CI框架 + mysql 编写
 
> 备注：经理说这个公司可能已经倒了，基本不用维护了，但是我觉得页面设计的挺好看的，现在这个网站还在跑着，地址 `fuyu.ourwill.cn`

+ 后台管理是在公司官网的管理系统上改动的 `fuyu.ourwill.cn/console` `用户名：jose` `密码：123456`

### 3.代码结构

```angular2html
  + application
        + controllers 控制器文件夹
          - ....
        + models   模型文件夹
          - ....
```

# 图文直播

### 1.coding上项目名：tuwen，上面有两个分支

+ master分支是代码是我的，有用的代码都在此分支上

- zhenyou分支是公司之前的一个实习生（于振友）写的

### 2.代码使用PHP CI框架 + mysql + vue（主要用于后台）编写

> 前后台页面都是我写的，接口是聪厚写的

> 图文直播的后台页面加入了vue，这是我第一次用vue，写的比较烂，当时也没有做后台的UI设计。

### 3.代码结构

```angular2html
    + application
      + controllers 控制器文件夹
        + console   网站后台控制器文件夹
          - .....  网站后台控制器
        - Auth.php
        - Home.php 
        - ......
      + models   模型文件夹
        - .....
```




